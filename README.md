# Задача

Пример входного файла:
```
Иванов Иван: 3515454
Сидоров Иван: 3515422
Сидоров Олег: 23515423
Петров Иван: 3515455
```

Программа должна выводить данные, отсортированные по именам, фамилиям и номерам.  
Перед выводом программа спрашивает — по какому параметру сортировать, и ставит выбранный параметр в начало вывода.

**Пример работы:**

Для сортировки по именам введите – 1, по фамилиям введите – 2, по телефонам введите – 3

Ввод: `1`  
Вывод:
```
Иван Иванов: 3515454
Иван Сидоров: 3515422
Иван Петров: 3515455
Олег Сидоров: 23515423
```

Ввод: `3`  
Вывод:
```
3515422: Сидоров Иван
3515454: Иванов Иван
3515455: Петров Иван
23515423: Сидоров Олег
```

---

# Инструкция по использованию программы телефонного справочника

## Общие сведения

Данная утилита позволяет сортировать телефонные справочники, содержащие имена, фамилии и номера телефонов. Поддерживаются различные форматы строк (русские и английские имена), а также автоматическая обработка некорректных строк.

Программа позволяет выбирать тип сортировки и задавать имя выходного файла. Реализована логика, при которой русские имена и фамилии всегда сортируются перед английскими (кириллица — перед латиницей).

**Если путь к входному файлу указан неверно или файл не найден, программа не завершает работу, а предлагает ввести путь снова или выйти.**

**Вы можете просто перетащить файл в окно программы — в этом случае путь к файлу автоматически подставится.**

---

## Как использовать программу

1. **Запуск**
    - Запустите исполняемый файл. Можно указать входной файл в параметре командной строки, или ввести его вручную.
    - При запуске программа предложит ввести путь к входному файлу, если он не был указан.
    - Если входной файл не указан, используется `input.txt` по умолчанию.
    - Если введён неверный путь, программа не завершает работу, а предлагает еще раз ввести путь, либо выйти.
    - **Вы можете перетащить файл прямо в окно программы и нажать Enter — путь будет считан автоматически.**

2. **Выбор имени выходного файла**
    - Программа попросит ввести имя файла для сохранения отсортированных данных.
    - Если такой файл уже существует, будет предложено подтвердить перезапись.

3. **Выбор типа сортировки**
    - На экране появится меню:
        ```
        1 - по имени (Имя Фамилия: Телефон)
        2 - по фамилии (Фамилия Имя: Телефон)
        3 - по телефону (Телефон: Фамилия Имя)
        4 - CSV (Имя,Фамилия,Телефон)
        ```
    - Введите номер соответствующего варианта.

4. **Обработка и повторное использование**
    - После завершения сортировки программа спросит, хотите ли выполнить ещё одну задачу.
    - Вы можете запустить обработку нового файла без перезапуска программы.

---

## Языки и логика сортировки

- **Русские имена и фамилии (кириллица)** всегда сортируются перед английскими (латиница).
- Внутри каждой группы сортировка идет по алфавиту выбранного языка (сначала кириллица, затем латиница).
- Если данные только на одном языке (например, только по-русски), сортировка будет чисто алфавитная.
- Если есть смешанные данные (русские и английские строки), сначала будут идти все русские строки, а затем английские.

**Пример:**
```
Иванов Иван
Петров Олег
Smith John
Taylor Alice
```
После сортировки по фамилии:
```
Иванов Иван
Петров Олег
Smith John
Taylor Alice
```
(русские фамилии — впереди, затем английские)

---

## Как сортируются телефонные номера

- При выборе сортировки по телефону (вариант 3), все записи сортируются по строковому значению телефонного номера, **сравнивая номера как строки слева направо**.
- Если номера состоят только из цифр — сортировка эквивалентна числовой, если номера имеют одинаковую длину.
- Если номера содержат дополнительные символы (например, пробелы, плюсы, дефисы), сортировка производится по символам строки: сначала сравниваются первые символы, затем вторые и так далее.
- **Пример:**
    ```
    123456
    234567
    5550012
    +7 123 555
    8-800-555-35-35
    ```
    После сортировки:
    ```
    +7 123 555
    123456
    234567
    5550012
    8-800-555-35-35
    ```
- Если нужно сортировать номера строго по числовому значению — предварительно уберите все нецифровые символы из номеров.

---

## Как отключить тесты перед запуском

В файле `main.cpp` есть строка:
```cpp
bool RUN_UNIT_TESTS = true;
```
Чтобы **отключить запуск тестов**, замените её на:
```cpp
bool RUN_UNIT_TESTS = false;
```
Тогда программа сразу перейдет к обработке данных, не проверяя работоспособность алгоритма.

---

## Алгоритм работы (основной цикл программы)

1. Проверка тестов (если включено).
2. Ввод имени входного файла (с возможностью повторного ввода при ошибке, либо перетаскивания файла).
3. Ввод имени выходного файла (с подтверждением перезаписи).
4. Ввод типа сортировки.
5. Чтение данных, парсинг строк.
6. Сортировка с приоритетом русского языка.
7. Запись результата в выходной файл.
8. Сообщение об ошибочных строках (если были).
9. Предложение обработать другой файл.
10. Выход из программы по желанию пользователя.

---

## Поддерживаемые языки и форматы

- **Русский (кириллица)**
- **Английский (латиница)**
- Форматы:
    - `Фамилия Имя: Телефон`
    - `Имя Фамилия - Телефон`
    - `Телефон: Фамилия Имя`
    - `Имя,Фамилия,Телефон` (CSV)
    - Строки, не соответствующие ни одному формату, будут записаны в конце выходного файла как некорректные.

---

## Пример входных данных

```
Иванов Иван: 123456
Олег Петров - 987654
Smith John: 5550012
Alice Taylor - 5550022
Некорректная строка
```

---

## Пример выходных данных (с сортировкой по фамилии)

```
Иванов Иван: 123456
Петров Олег: 987654
Smith John: 5550012
Taylor Alice: 5550022

Следующие строки не соответствуют ни одному формату и не были отсортированы:
Некорректная строка
```

---

## Контрольные тесты

Перед запуском основной программы (если тесты включены) автоматически проверяется корректность сортировки и парсинга. Если тесты не проходят, программа предупредит пользователя и предложит подтвердить запуск вручную.

---
